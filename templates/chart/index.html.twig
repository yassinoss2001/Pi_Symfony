{% extends 'base.html.twig' %}

{% block title %}Statistique{% endblock %}

{% block contenu %}
<div class="pagetitle">
    <h1>Statistique</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('app_backend') }}">Home</a></li>
        </ol>
    </nav>
</div><!-- End Page Title -->

<section class="section">
    <div class="row">
        <div class="col-lg-12">

            <div class="card">
                <div class="card-body">

                    <div id="pieChart" style="min-height: 400px;" class="echart"></div>

                    <script>
                        document.addEventListener("DOMContentLoaded", () => {
                            echarts.init(document.querySelector("#pieChart")).setOption({
                                title: {
                                    text: 'RÃ©partition des restaurants par place',
                                    left: 'center'
                                },
                                tooltip: {
                                    trigger: 'item'
                                },
                                legend: {
                                    orient: 'vertical',
                                    left: 'left',
                                    data: {{ places|json_encode|raw }}
                                },
                                series: [{
                                    name: 'Nombre de restaurants',
                                    type: 'pie',
                                    radius: '50%',
                                    data: {{ placesCount|json_encode|raw }},
                                    emphasis: {
                                        itemStyle: {
                                            shadowBlur: 10,
                                            shadowOffsetX: 0,
                                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                                        }
                                    }
                                }]
                            });
                        });
                    </script>

                </div>
            </div>

        </div>
    </div>
</section>

<ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{{ path('app_chart2') }}">Next</a></li>
</ol>
{% endblock %}
